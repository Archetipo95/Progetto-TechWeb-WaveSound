<?xml version="1.0" encoding="utf-8"?>
<!--
- phpMyAdmin XML Dump
- version 4.6.5.2
- https://www.phpmyadmin.net
-
- Host: 127.0.0.1
- Creato il: Dic 06, 2017 alle 15:29
- Versione del server: 10.1.21-MariaDB
- Versione PHP: 5.6.30
-->

<pma_xml_export version="1.0" xmlns:pma="https://www.phpmyadmin.net/some_doc_url/">
    <!--
    - Structure schemas
    -->
    <pma:structure_schemas>
        <pma:database name="tecweb" collation="utf8_unicode_ci" charset="utf8">
            <pma:table name="album">
                CREATE TABLE `album` (
                  `id_album` int(11) NOT NULL AUTO_INCREMENT,
                  `nome` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
                  `picture` varchar(500) COLLATE utf8_unicode_ci DEFAULT NULL,
                  `id_canzone` int(11) NOT NULL,
                  `composed_by` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
                  PRIMARY KEY (`id_album`),
                  KEY `id_canzone` (`id_canzone`),
                  KEY `composed_by` (`composed_by`),
                  CONSTRAINT `album_ibfk_1` FOREIGN KEY (`id_canzone`) REFERENCES `canzone` (`id_canzone`),
                  CONSTRAINT `album_ibfk_2` FOREIGN KEY (`composed_by`) REFERENCES `utente` (`username`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
            </pma:table>
            <pma:table name="brani_caricati">
                CREATE TABLE `brani_caricati` (
                  `id_canzone` int(11) NOT NULL,
                  `username` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
                  PRIMARY KEY (`id_canzone`,`username`),
                  KEY `username` (`username`),
                  CONSTRAINT `brani_caricati_ibfk_1` FOREIGN KEY (`id_canzone`) REFERENCES `canzone` (`id_canzone`),
                  CONSTRAINT `brani_caricati_ibfk_2` FOREIGN KEY (`username`) REFERENCES `utente` (`username`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
            </pma:table>
            <pma:table name="canzone">
                CREATE TABLE `canzone` (
                  `id_canzone` int(11) NOT NULL AUTO_INCREMENT,
                  `titolo` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
                  `data_publicazione` date NOT NULL,
                  `descrizione` varchar(180) COLLATE utf8_unicode_ci DEFAULT NULL,
                  `path` varchar(250) COLLATE utf8_unicode_ci NOT NULL,
                  `composed_by` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
                  `id_album` int(11) DEFAULT NULL,
                  PRIMARY KEY (`id_canzone`),
                  KEY `id_album` (`id_album`),
                  KEY `composed_by` (`composed_by`),
                  CONSTRAINT `canzone_ibfk_1` FOREIGN KEY (`composed_by`) REFERENCES `utente` (`username`),
                  CONSTRAINT `canzone_ibfk_2` FOREIGN KEY (`id_album`) REFERENCES `album` (`id_album`),
                  CONSTRAINT `canzone_ibfk_3` FOREIGN KEY (`composed_by`) REFERENCES `utente` (`username`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
            </pma:table>
            <pma:table name="commento">
                CREATE TABLE `commento` (
                  `desrizione` varchar(180) COLLATE utf8_unicode_ci DEFAULT NULL,
                  `username` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
                  `id_canzone` int(11) NOT NULL,
                  PRIMARY KEY (`username`,`id_canzone`),
                  KEY `id_canzone` (`id_canzone`),
                  CONSTRAINT `commento_ibfk_1` FOREIGN KEY (`username`) REFERENCES `utente` (`username`),
                  CONSTRAINT `commento_ibfk_2` FOREIGN KEY (`id_canzone`) REFERENCES `canzone` (`id_canzone`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
            </pma:table>
            <pma:table name="follow">
                CREATE TABLE `follow` (
                  `id_user` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
                  `id_follow` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
                  PRIMARY KEY (`id_user`,`id_follow`),
                  KEY `id_follow` (`id_follow`),
                  CONSTRAINT `follow_ibfk_1` FOREIGN KEY (`id_user`) REFERENCES `utente` (`username`),
                  CONSTRAINT `follow_ibfk_2` FOREIGN KEY (`id_follow`) REFERENCES `utente` (`username`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
            </pma:table>
            <pma:table name="libreria">
                CREATE TABLE `libreria` (
                  `id_libreria` int(11) NOT NULL AUTO_INCREMENT,
                  `username` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
                  `id_canzone` int(11) NOT NULL,
                  PRIMARY KEY (`id_libreria`),
                  KEY `username` (`username`),
                  KEY `id_canzone` (`id_canzone`),
                  CONSTRAINT `libreria_ibfk_1` FOREIGN KEY (`username`) REFERENCES `utente` (`username`),
                  CONSTRAINT `libreria_ibfk_2` FOREIGN KEY (`id_canzone`) REFERENCES `canzone` (`id_canzone`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
            </pma:table>
            <pma:table name="utente">
                CREATE TABLE `utente` (
                  `username` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
                  `nome` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
                  `cognome` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
                  `data_nascita` date NOT NULL,
                  `email` varchar(20) COLLATE utf8_unicode_ci NOT NULL,
                  `tipo_utente` int(1) NOT NULL DEFAULT '0',
                  `pass` varchar(12) COLLATE utf8_unicode_ci NOT NULL,
                  `picture` varchar(500) COLLATE utf8_unicode_ci DEFAULT NULL,
                  `id_libreria` int(11) NOT NULL,
                  PRIMARY KEY (`username`),
                  KEY `id_libreria` (`id_libreria`),
                  CONSTRAINT `utente_ibfk_1` FOREIGN KEY (`id_libreria`) REFERENCES `libreria` (`id_libreria`)
                ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
            </pma:table>
        </pma:database>
    </pma:structure_schemas>

    <!--
    - Database: 'tecweb'
    -->
    <database name="tecweb">
        <!-- Tabella album -->
        <!-- Tabella brani_caricati -->
        <!-- Tabella canzone -->
        <!-- Tabella commento -->
        <!-- Tabella follow -->
        <!-- Tabella libreria -->
        <!-- Tabella utente -->
    </database>
</pma_xml_export>